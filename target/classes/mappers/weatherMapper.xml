<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="org.zerock.myapp.mapper.WeatherMapper">
    <insert
    parameterType="org.zerock.myapp.domain.WeatherDTO"
    id="insertDate">
    INSERT INTO [dbo.WeatherHourlyData](SID, dataType, inputdatetime)
    VALUES(next value for SEQ_SID, #{dataType}, #{inputdatetime})
    </insert>
    
    <select
        resultType="Integer"
        id="dataCount">
        SELECT count(*)
        FROM [dbo.WeatherHourlyData]
        WHERE inputdatetime = #{inputdatetime}
            AND dataType = #{dataType}
    </select>
    
    <select
        resultType="org.zerock.myapp.domain.WeatherVO"
        id="weatherList">
        SELECT *
        FROM [dbo.WeatherHourlyData]
        WHERE inputdatetime = #{inputdatetime}
        AND dataType = #{dataType}
    </select>
    
    <update
        id="uTMP1">
        UPDATE [dbo.WeatherHourlyData]
        SET ${t} = #{tmp}
        WHERE inputdatetime = #{inputdatetime}
        AND dataType = #{dataType}
    </update>
    
    <update
        id="uREH1">
        UPDATE [dbo.WeatherHourlyData]
        SET ${t} = #{reh}
        WHERE inputdatetime = #{inputdatetime}
        AND dataType = #{dataType}
    </update>
</mapper>